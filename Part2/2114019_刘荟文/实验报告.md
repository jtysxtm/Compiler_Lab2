# EX1

- 定义`yylval`数据类型为`double`。

- 如果字符是数字，赋值给`yylval`，返回`NUMBER`类别；如果是+、-、*、/、（、），返回对应类别。

- 在`main`函数中，循环调用`yyparse`解析输入表达式，对调用词法分析器返回的类别和值进行语法分析，执行对应操作。

- `lines`表示可以输入多行表达式，每行以分号结束。

- `expr`定义了各种运算操作的语法规则，包括加减乘除、括号和负号。

- `%left`和`%right`定义了运算符的优先级和左右结合性，越往下优先级越高。

- `yyerror()`输出解析错误信息。

# EX2

- 识别并忽略空格、指标符、回车。

- 如果当前字符是数字，则将`yylval`初始化为0，并进入循环。
  - 在循环中，使用`isdigit()`判断当前字符是否为数字。
  - 若是数字，则将其与之前已经识别到的数字组合起来，通过乘10并加上新的数字字符减去字符'0'得到新的`yylval`，并继续读取下一个字符。
  - 直到遇到非数字字符时，将最后读取到的非数字字符退回到输入流中（使用`ungetc(ch, stdin)`），并返回单词类型`NUMBER`。

# EX3

- 宏定义`YYSTYPE`为`char*`类型。

- 定义字符串数组`numStr`和`idStr`用于保存数字和标识符的字符串表示。

- 对于中缀转后缀表达式定义语法规则，以`ADD`举例，使用`malloc`动态分配内存空间，并使用`strcpy`和`strcat`将两个表达式和运算符拼接成一个字符串，`SUB`等同理。

# 思考题

- 词法分析器

  - 识别数字（NUMBER）：连续读取字符直到遇到非数字字符，将数字转换为`double`类型，并返回`NUMBER`。
  - 识别标识符（IDENTIFIER）：连续读取字母、数字或_直到遇到非法字符，将标识符存储在字符串中，并返回`IDENTIFIER`。如果标识符是"END"，则返回END标记。
  - 识别运算符和其他特殊字符：根据字符返回对应标记。

- 语法规则

  - 定义语法规则，包括程序（`program`）、语句（`stmt`）和表达式（`expr`）。
  - \$$表示当前规则结果，$1、$2表示规则中的子结果。
  - `program`，程序入口，可为多个`stmt`或空。
  - `stmt`，赋值语句，包括变量（`IDENTIFIER`）、赋值符号（`ASSIGN`）和表达式（`expr`），赋值将变量和表达式的值插入符号表（`SymbolTable`）。
  - `expr`，表达式，支持加减乘除运算和括号。识别标识符时，判断是否在符号表中存在对应的值。


- 符号表（SymbolTable）

  - `SymbolTable`类用于存储变量名和对应的值。
  - `insert`，插入变量和值的方法。
  - `lookup`，查找标识符是否存在于符号表中。
  - `getValue`，获取标识符对应的值。
  - `printAll`，打印符号表中的所有标识符及其对应的值。
  - 在赋值语句中，将变量名和值插入符号表；在表达式中，根据变量名获取对应的值进行计算。


